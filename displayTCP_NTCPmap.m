function displayTCP_NTCPmap( table )
%DISPLAYTCP_NTCPMAP superimposes the TCP map and NTCP map

%create NTCP matrix
NTCPdata = table2mat(table,'NTCP');
%replace NaN values with zeros
NTCPdata(isnan(NTCPdata)) = 0;

%create TCP matrix
TCPdata = table2mat(table,'TCP');
%replace NaN values with zeros
TCPdata(isnan(TCPdata)) = 0;

%combine TCP and NTCP matrices, where NTCP is negative
data = TCPdata - NTCPdata;

%display TCP-NTCP map
h = figure;
%create colormap TCP (green) - NTCP (red)
cmap = [1,0,0;0.967741906642914,0,0;0.935483872890472,0,0;0.903225779533386,0,0;0.870967745780945,0,0;0.838709652423859,0,0;0.806451618671417,0,0;0.774193525314331,0,0;0.741935491561890,0,0;0.709677398204804,0,0;0.677419364452362,0,0;0.645161271095276,0,0;0.612903237342835,0,0;0.580645143985748,0,0;0.548387110233307,0,0;0.516129016876221,0,0;0.483870953321457,0,0;0.451612889766693,0,0;0.419354826211929,0,0;0.387096762657166,0,0;0.354838699102402,0,0;0.322580635547638,0,0;0.290322571992874,0,0;0.258064508438110,0,0;0.225806444883347,0,0;0.193548381328583,0,0;0.161290317773819,0,0;0.129032254219055,0,0;0.0967741906642914,0,0;0.0645161271095276,0,0;0.0322580635547638,0,0;0,0,0;0,0,0;0,0.0322580635547638,0;0,0.0645161271095276,0;0,0.0967741906642914,0;0,0.129032254219055,0;0,0.161290317773819,0;0,0.193548381328583,0;0,0.225806444883347,0;0,0.258064508438110,0;0,0.290322571992874,0;0,0.322580635547638,0;0,0.354838699102402,0;0,0.387096762657166,0;0,0.419354826211929,0;0,0.451612889766693,0;0,0.483870953321457,0;0,0.516129016876221,0;0,0.548387110233307,0;0,0.580645143985748,0;0,0.612903237342835,0;0,0.645161271095276,0;0,0.677419364452362,0;0,0.709677398204804,0;0,0.741935491561890,0;0,0.774193525314331,0;0,0.806451618671417,0;0,0.838709652423859,0;0,0.870967745780945,0;0,0.903225779533386,0;0,0.935483872890472,0;0,0.967741906642914,0;0,1,0];
colormap(cmap);
%loop while figure open
while ishandle(h)
    for i = 1 : size(data,3)
        %check that figure is open before executing iteration
        if ~ishandle(h)
            break
        end
        imagesc(data(:,:,i),[-1 1]);
        title(sprintf('Slice %i/%i',i,size(data,3)));
        axis off;
        c = colorbar;
        ylabel(c,'<--NTCP (red)  TCP (green)-->');
        pause(0.05);
    end
end
end